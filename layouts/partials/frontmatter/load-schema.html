{{/* Schema Loader - reads complete schema from data directory */}}
{{/* IMPORTANT: Returns schema via .Scratch, not as return value */}}
{{/* Usage: {{ partial "frontmatter/load-schema.html" . }} */}}
{{/*        {{ $schema := .Scratch.Get "frontmatter_schema" }} */}}

{{- $schema := dict -}}

{{/* Get configurable namespace from params (default: "presidium") */}}
{{- $namespace := .Site.Params.data.namespace | default "presidium" -}}

{{/* Load schema from data/{namespace} directory (generated by PRSDM-9508) */}}
{{- $schemaData := index .Site.Data $namespace "frontmatter-schema" -}}

{{- if not $schemaData -}}
  {{- warnf "frontmatter-schema.json not found in data/%s/. Run schema generation first." $namespace -}}
  {{- $schema = dict -}}
{{- else -}}
  {{- $schema = $schemaData -}}
{{- end -}}

{{/* Store in scratch for retrieval */}}
{{- .Scratch.Set "frontmatter_schema" $schema -}}
